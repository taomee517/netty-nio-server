package com.demo.netty.echo.test;

import com.demo.netty.echo.utils.BytesUtil;
import io.netty.buffer.ByteBuf;
import io.netty.buffer.Unpooled;
import io.netty.channel.ChannelHandlerContext;
import io.netty.channel.ChannelInboundHandlerAdapter;

import java.nio.charset.Charset;

public class MyClientHandler extends ChannelInboundHandlerAdapter {
    private int flag = 0;


    @Override
    public void channelActive(ChannelHandlerContext ctx) throws Exception {
//        String msg = DefaultValue.DEFAULT_FIRST_MSG;
//        ByteBuf buf = Unpooled.buffer(msg.length());
//        for(int i=0;i<msg.length();i++){
//            buf.writeByte((byte)msg.charAt(i));
//        }

//        String hex = "3a 30 31 32 34 30 34 33 38 32 30 30 38 33 31 31 31 33 30 30 30 2b 38 34 31 2e 38 32 32 2b 33 30 37 39 2e 34 30 2b 37 35 33 2e 36 38 35 2b 33 30 33 36 2e 36 33 2b 38 32 31 2e 38 38 31 2b 33 30 38 31 2e 32 39 2b 38 32 33 2e 37 33 39 2b 33 30 35 34 2e 31 30 2b 38 36 32 2e 38 32 37 2b 33 30 34 30 2e 30 30 2b 38 32 33 2e 35 34 36 2b 33 30 30 36 2e 39 34 2b 38 31 32 2e 39 30 31 2b 33 30 32 38 2e 34 35 2b 38 39 39 2e 30 39 35 2b 32 39 37 35 2e 36 31 2b 37 36 33 2e 33 32 30 2b 33 30 31 33 2e 38 32 2b 38 35 38 2e 37 30 34 2b 32 39 38 36 2e 35 36 2b 37 39 37 2e 35 34 32 2b 32 39 39 35 2e 36 35 2b 38 35 33 2e 30 37 30 2b 33 30 34 31 2e 39 31 2b 32 30 36 32 2e 34 33 2b 32 38 36 35 2e 30 30 2b 31 37 30 32 2e 38 39 2b 32 38 33 36 2e 38 32 2b 31 38 33 38 2e 38 32 2b 32 39 33 36 2e 33 32 2b 31 37 34 38 2e 31 30 2b 32 39 33 37 2e 34 39 2b 31 38 31 35 2e 37 39 2b 32 39 32 37 2e 37 36 2b 33 31 34 34 2e 34 38 2b 32 39 38 35 2e 37 38 2b 33 32 34 36 2e 36 36 2b 33 30 36 33 2e 32 32 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 37 34 0d 0a";
//        byte[] bytes = BytesUtil.hex2Bytes(hex);
//        ByteBuf buf = Unpooled.wrappedBuffer(bytes);
//        ctx.writeAndFlush(buf);
//        System.out.println("向服务器发送消息：" + new String(bytes));
    }

    @Override
    public void channelRead(ChannelHandlerContext ctx, Object msg) throws Exception {
        ByteBuf byteBuf = (ByteBuf)msg;
        String data = byteBuf.toString(Charset.forName("utf-8"));
        System.out.println("收到消息：" + data);

//        String hex = "3a 30 31 32 34 30 34 33 38 32 30 30 38 33 31 31 31 33 30 30 30 2b 38 34 31 2e 38 32 32 2b 33 30 37 39 2e 34 30 2b 37 35 33 2e 36 38 35 2b 33 30 33 36 2e 36 33 2b 38 32 31 2e 38 38 31 2b 33 30 38 31 2e 32 39 2b 38 32 33 2e 37 33 39 2b 33 30 35 34 2e 31 30 2b 38 36 32 2e 38 32 37 2b 33 30 34 30 2e 30 30 2b 38 32 33 2e 35 34 36 2b 33 30 30 36 2e 39 34 2b 38 31 32 2e 39 30 31 2b 33 30 32 38 2e 34 35 2b 38 39 39 2e 30 39 35 2b 32 39 37 35 2e 36 31 2b 37 36 33 2e 33 32 30 2b 33 30 31 33 2e 38 32 2b 38 35 38 2e 37 30 34 2b 32 39 38 36 2e 35 36 2b 37 39 37 2e 35 34 32 2b 32 39 39 35 2e 36 35 2b 38 35 33 2e 30 37 30 2b 33 30 34 31 2e 39 31 2b 32 30 36 32 2e 34 33 2b 32 38 36 35 2e 30 30 2b 31 37 30 32 2e 38 39 2b 32 38 33 36 2e 38 32 2b 31 38 33 38 2e 38 32 2b 32 39 33 36 2e 33 32 2b 31 37 34 38 2e 31 30 2b 32 39 33 37 2e 34 39 2b 31 38 31 35 2e 37 39 2b 32 39 32 37 2e 37 36 2b 33 31 34 34 2e 34 38 2b 32 39 38 35 2e 37 38 2b 33 32 34 36 2e 36 36 2b 33 30 36 33 2e 32 32 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 37 34 0d 0a";
//        String hex = "3a 31 30 32 34 30 30 30 30 32 30 31 30 31 34 31 35 30 30 30 30 2b 30 2e 30 30 30 30 30 2b 30 2e 30 31 30 30 30 2b 30 2e 30 30 30 30 30 2b 35 35 32 34 2e 32 32 2b 30 2e 32 37 38 39 39 2b 30 2e 35 32 30 39 36 2b 30 2e 33 30 33 31 30 2b 30 2e 35 31 33 36 31 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 30 35 0d 0a";
//        String hex = "3a 36 30 32 34 30 30 30 30 32 30 31 30 31 34 31 35 30 30 30 30 2b 32 31 37 39 2e 33 33 2b 35 35 34 39 2e 31 36 2b 32 34 37 37 2e 37 39 2b 35 34 38 33 2e 34 33 2b 32 35 31 35 2e 31 33 2b 35 35 38 36 2e 33 36 2b 32 32 38 34 2e 36 32 2b 30 39 39 39 33 36 37 2b 32 38 35 30 2e 34 32 2b 35 35 33 38 2e 33 37 2b 32 37 31 38 2e 37 30 2b 35 34 34 34 2e 32 33 2b 32 36 31 38 2e 36 37 2b 35 34 39 37 2e 38 36 2b 31 32 38 34 2e 34 32 2b 35 34 32 31 2e 35 33 2b 32 32 36 36 2e 34 32 2b 35 34 32 37 2e 39 35 2b 32 37 36 30 2e 38 38 2b 35 36 34 31 2e 35 35 2b 32 39 32 36 2e 39 30 2b 35 35 32 37 2e 33 35 2b 32 34 38 30 2e 36 33 2b 35 34 37 35 2e 37 33 2b 32 35 34 38 2e 36 32 2b 35 35 39 30 2e 36 31 2b 32 31 36 30 2e 38 34 2b 35 33 36 36 2e 31 33 2b 32 31 31 36 2e 36 32 2b 35 34 37 36 2e 35 32 2b 32 33 38 31 2e 38 38 2b 35 35 38 35 2e 30 37 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 39 41 0d 0a";
//        String hex = "3a 36 31 32 34 30 30 30 35 32 30 31 30 31 34 31 35 30 30 30 30 2b 30 2e 30 30 30 30 30 2b 35 36 33 36 2e 32 39 2b 30 2e 30 30 30 30 30 2b 35 35 37 34 2e 32 31 2b 30 2e 33 34 32 36 39 2b 30 2e 35 31 34 35 38 2b 30 2e 33 34 35 36 36 2b 30 2e 34 39 36 31 35 2b 30 2e 30 30 30 30 30 2b 35 37 34 37 2e 39 39 2b 30 2e 30 30 30 30 30 2b 35 37 36 38 2e 36 32 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 35 30 0d 0a";
//        String hex = "3A 31 46 32 32 31 30 30 30 30 30 30 30 30 32 37 33 33 41 0D 0A";
//        String hex = "3a 30 32 32 34 30 32 33 35 32 30 30 38 33 31 31 34 30 30 30 30 2b 32 39 34 33 2e 37 36 2b 33 30 35 39 2e 31 39 2b 33 30 32 30 2e 30 31 2b 33 30 32 36 2e 38 38 2b 30 2e 31 37 31 35 37 2d 30 2e 31 37 32 32 33 2d 30 2e 34 39 32 39 32 2d 30 2e 31 36 35 30 37 2b 30 2e 30 30 30 30 30 2b 33 31 30 32 2e 33 34 2d 30 2e 32 30 31 37 31 2b 30 2e 32 30 32 35 38 2b 30 2e 30 30 30 30 30 2b 33 35 31 36 2e 36 38 2b 30 2e 33 31 32 39 35 2b 30 2e 31 30 33 39 36 2b 30 2e 30 30 30 30 30 2b 33 31 31 34 2e 36 32 2d 30 2e 30 30 33 35 38 2b 30 2e 30 30 33 37 39 2b 30 2e 30 30 30 30 30 2b 33 35 37 38 2e 31 31 2b 30 2e 30 32 36 32 31 2b 30 2e 30 30 38 34 34 2b 30 2e 30 30 30 30 30 2b 34 31 38 36 2e 34 33 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 38 42 0d 0a";
//        String hex = "3a 30 32 32 34 30 32 33 35 32 30 30 38 33 31 31 34 30 30 30 30 2b 32 39 34 33 2e 37 36 2b 33 30 35 39 2e 31 39 2b 33 30 32 30 2e 30 31 2b 33 30 32 36 2e 38 38 2b 30 2e 31 37 31 35 37 2d 30 2e 31 37 32 32 33 2d 30 2e 34 39 32 39 32 2d 30 2e 31 36 35 30 37 2b 30 2e 30 30 30 30 30 2b 33 31 30 32 2e 33 34 2d 30 2e 32 30 31 37 31 2b 30 2e 32 30 32 35 38 2b 30 2e 30 30 30 30 30 2b 33 35 31 36 2e 36 38 2b 30 2e 33 31 32 39 35 2b 30 2e 31 30 33 39 36 2b 30 2e 30 30 30 30 30 2b 33 31 31 34 2e 36 32 2d 30 2e 30 30 33 35 38 2b 30 2e 30 30 33 37 39 2b 30 2e 30 30 30 30 30 2b 33 35 37 38 2e 31 31 2b 30 2e 30 32 36 32 31 2b 30 2e 30 30 38 34 34 2b 30 2e 30 30 30 30 30 2b 34 31 38 36 2e 34 33 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 38 42 0d 0a";
        String hex = "3a 30 32 32 34 30 32 33 35 32 30 30 38 33 31 31 34 30 30 30 30 2b 32 39 34 33 2e 37 36 2b 33 30 35 39 2e 31 39 2b 33 30 32 30 2e 30 31 2b 33 30 32 36 2e 38 38 2b 30 2e 31 37 31 35 37 2d 30 2e 31 37 32 32 33 2d 30 2e 34 39 32 39 32 2d 30 2e 31 36 35 30 37 2b 30 2e 30 30 30 30 30 2b 33 31 30 32 2e 33 34 2d 30 2e 32 30 31 37 31 2b 30 2e 32 30 32 35 38 2b 30 2e 30 30 30 30 30 2b 33 35 31 36 2e 36 38 2b 30 2e 33 31 32 39 35 2b 30 2e 31 30 33 39 36 2b 30 2e 30 30 30 30 30 2b 33 31 31 34 2e 36 32 2d 30 2e 30 30 33 35 38 2b 30 2e 30 30 33 37 39 2b 30 2e 30 30 30 30 30 2b 33 35 37 38 2e 31 31 2b 30 2e 30 32 36 32 31 2b 30 2e 30 30 38 34 34 2b 30 2e 30 30 30 30 30 2b 34 31 38 36 2e 34 33 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 45 31 30 30 30 30 30 30 38 42 0d 0a";
        if (flag==0) {
//            String ascii = ":5E240004201029200000+902.168+6561.14+921.893+6275.21+902.566+6278.62+941.482+6544.56+910.677+6194.59+904.018+6192.53+907.037+6134.48+928.072+6263.67+914.700+6278.19+911.239+6163.11+905.099+6122.67+928.170+6237.02+0.87403+0.29414-0.21509-0.07237+0.27029+0.48972+0.30894+0.46181E1000000E1000000FF\r\n";
        byte[] bytes = BytesUtil.hex2Bytes(hex);
//            String ascii = ":5E240023201030150000+901.623+6419.84+921.414+6298.72+902.105+6281.80+940.181+6437.22+910.295+6219.42+903.671+6200.10+906.670+6148.33+927.824+6276.286371.13+910.596+6237.96+904.772+6185.97+927.913+6346.04+0.87385+0.29411-0.21505-0.072���������������������459+0.51410E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000E1000000FF\r\n";
//            byte[] bytes = ascii.getBytes();
            ByteBuf buf = Unpooled.wrappedBuffer(bytes);
            ctx.writeAndFlush(buf);
            System.out.println("向服务器发送消息：" + new String(bytes));
        }
        flag ++;
    }

    @Override
    public void channelReadComplete(ChannelHandlerContext ctx) throws Exception {
       ctx.flush();
    }

    @Override
    public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) throws Exception {
        cause.printStackTrace();
        ctx.close();
    }
}
